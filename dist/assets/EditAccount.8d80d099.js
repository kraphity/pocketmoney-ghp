import{d as w,r as u,H as h,f as C,o as A,c as S,w as n,g as t,a as c,ap as I,B as k,T as E,u as H,aI as M}from"./index.c771d730.js";import{u as B,P}from"./accounts.a8104d90.js";import{a as R,d as D,b as G,c as K}from"./VCard.33059508.js";import{V as L,a as y,b as O}from"./VSelect.2ed4e604.js";import{V as F,h as W,y as $}from"./VSpacer.d63848c3.js";import"./useAlerts.71abaa1d.js";import"./tag.1f5b3fdc.js";import"./index.f098a021.js";const j=w({__name:"EditAccountCard",props:{account:null},emits:["cancel","saved","deleted"],setup(_,{emit:s}){const i=_,{updateAccount:m,removeAccount:d}=B(),a=i.account,r=[{text:"w\xF6chentlich",value:P.Weekly}],v=u(),p=u(a.data.name),f=u(a.data.settings.payment.amount.toString()),V=u(a.data.settings.payment.interval||r[0].value),b=u(a.data.credit.toString()),x={name:[e=>!!e||"Name wird ben\xF6tigt"],amount:[e=>!!e||"Betrag wird ben\xF6tigt",e=>e>0?!0:"Betrag muss gr\xF6sser als 0 sein"],credit:[e=>!!e||"Betrag wird ben\xF6tigt",e=>isNaN(e)?"Betrag ist ung\xFCltig":!0]},g=u(!1),N=()=>s("cancel"),T=async()=>{await d(a.id),s("deleted")},U=async()=>{await m(a.id,{name:p.value,settings:{payment:{amount:parseFloat(f.value),interval:V.value}},credit:parseFloat(b.value)})&&s("saved")};return h(()=>{var e;(e=v.value)==null||e.validate()}),(e,l)=>C(a)?(A(),S(K,{key:0},{default:n(()=>[t(R,null,{default:n(()=>[c("Konto bearbeiten")]),_:1}),t(D,null,{default:n(()=>[t(C(L),{id:"edit-form",ref_key:"editForm",ref:v,modelValue:g.value,"onUpdate:modelValue":l[4]||(l[4]=o=>g.value=o),onSubmit:I(U,["prevent"])},{default:n(()=>[t(y,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=o=>p.value=o),label:"Name",rules:x.name},null,8,["modelValue","rules"]),t(y,{modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=o=>f.value=o),label:"Sackgeld",rules:x.amount},null,8,["modelValue","rules"]),t(O,{items:r,"item-title":"text","item-value":"value",label:"Intervall",modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=o=>V.value=o)},null,8,["modelValue"]),t(y,{modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=o=>b.value=o),label:"Guthaben",rules:x.credit},null,8,["modelValue","rules"])]),_:1},8,["modelValue","onSubmit"])]),_:1}),t(G,null,{default:n(()=>[t(F,{color:"secondary",variant:"text",onClick:T},{default:n(()=>[c(" L\xF6schen ")]),_:1}),t(W),t(F,{color:"secondary",variant:"text",onClick:N},{default:n(()=>[c(" Abbrechen ")]),_:1}),t(F,{type:"submit",form:"edit-form",color:"primary",variant:"text",disabled:!g.value},{default:n(()=>[c(" Speichern ")]),_:1},8,["disabled"])]),_:1})]),_:1})):k("",!0)}}),te=w({__name:"EditAccount",setup(_){const{fetchAccount:s}=B(),i=H(),m=M(),d=()=>i.push("/"),a=u();return E(()=>m.params.id,async r=>{r&&(a.value=await s(r))},{immediate:!0}),(r,v)=>a.value?(A(),S($,{key:0},{default:n(()=>[t(j,{account:a.value,onCancel:d,onSaved:d,onDeleted:d},null,8,["account"])]),_:1})):k("",!0)}});export{te as default};
