import{d as w,r as u,K as T,f as C,o as A,c as S,w as n,g as t,a as i,ap as D,D as k,W as E,u as G,aG as I}from"./index.54b61c48.js";import{u as B,P as K}from"./accounts.8755777d.js";import{a as M,d as P,b as R,c as W}from"./VCard.b43ae83d.js";import{V as z,a as y,b as H}from"./VSelect.67094c82.js";import{V as F,h as L,y as O}from"./VSpacer.abf45f70.js";import"./useAlerts.8f98e397.js";import"./tag.cc08e66e.js";import"./index.898f71b2.js";const $=w({__name:"EditAccountCard",props:{account:null},emits:["cancel","saved","deleted"],setup(_,{emit:s}){const c=_,{updateAccount:m,removeAccount:d}=B(),a=c.account,r=[{text:"w\xF6chentlich",value:K.Weekly}],v=u(),p=u(a.data.name),f=u(a.data.settings.payment.amount.toString()),V=u(a.data.settings.payment.interval||r[0].value),b=u(a.data.credit.toString()),x={name:[e=>!!e||"Name wird ben\xF6tigt"],amount:[e=>!!e||"Betrag wird ben\xF6tigt",e=>e>0?!0:"Betrag muss gr\xF6sser als 0 sein"],credit:[e=>!!e||"Betrag wird ben\xF6tigt",e=>isNaN(e)?"Betrag ist ung\xFCltig":!0]},g=u(!1),N=()=>s("cancel"),U=async()=>{await d(a.id),s("deleted")},h=async()=>{await m(a.id,{name:p.value,settings:{payment:{amount:parseFloat(f.value),interval:V.value}},credit:parseFloat(b.value)})&&s("saved")};return T(()=>{var e;(e=v.value)==null||e.validate()}),(e,l)=>C(a)?(A(),S(W,{key:0},{default:n(()=>[t(M,null,{default:n(()=>[i("Konto bearbeiten")]),_:1}),t(P,null,{default:n(()=>[t(C(z),{id:"edit-form",ref_key:"editForm",ref:v,modelValue:g.value,"onUpdate:modelValue":l[4]||(l[4]=o=>g.value=o),"lazy-validation":"",onSubmit:D(h,["prevent"])},{default:n(()=>[t(y,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=o=>p.value=o),label:"Name",rules:x.name},null,8,["modelValue","rules"]),t(y,{modelValue:f.value,"onUpdate:modelValue":l[1]||(l[1]=o=>f.value=o),label:"Sackgeld",rules:x.amount},null,8,["modelValue","rules"]),t(H,{items:r,"item-title":"text","item-value":"value",label:"Intervall",modelValue:V.value,"onUpdate:modelValue":l[2]||(l[2]=o=>V.value=o)},null,8,["modelValue"]),t(y,{modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=o=>b.value=o),label:"Guthaben",rules:x.credit},null,8,["modelValue","rules"])]),_:1},8,["modelValue","onSubmit"])]),_:1}),t(R,null,{default:n(()=>[t(F,{color:"secondary",variant:"text",onClick:U},{default:n(()=>[i(" L\xF6schen ")]),_:1}),t(L),t(F,{color:"secondary",variant:"text",onClick:N},{default:n(()=>[i(" Abbrechen ")]),_:1}),t(F,{type:"submit",form:"edit-form",color:"primary",variant:"text",disabled:!g.value},{default:n(()=>[i(" Speichern ")]),_:1},8,["disabled"])]),_:1})]),_:1})):k("",!0)}}),te=w({__name:"EditAccount",setup(_){const{fetchAccount:s}=B(),c=G(),m=I(),d=()=>c.push("/"),a=u();return E(()=>m.params.id,async r=>{r&&(a.value=await s(r))},{immediate:!0}),(r,v)=>a.value?(A(),S(O,{key:0},{default:n(()=>[t($,{account:a.value,onCancel:d,onSaved:d,onDeleted:d},null,8,["account"])]),_:1})):k("",!0)}});export{te as default};
